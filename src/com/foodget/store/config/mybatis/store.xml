<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.foodget.store.model.dao.StoreDaoImpl">
    
<!--    <typeAlias alias="mdto" type="com.kitri.member.model.MemberDto"/>-->
    <!-- 현재 xml에서 사용됨 (지역변수같은 것)-->
    
    <select id="storeCheck" parameterType="sdto" resultType="int">
        select count(store_seq)
        from store
        where store_name = #{store_name}
        and store_address = #{store_address}
    </select>
    
    <insert id="storeInsert" parameterType="sdto">
        insert into store (store_seq, store_name, store_address, store_phone, hot_taste, sour_taste, clean_taste, sweet_taste, fresh_taste, k_hot_taste, store_latitude, store_longitude)
        values(store_seq.nextval, #{store_name}, #{store_address}, #{store_phone}, 0, 0, 0, 0, 0, 0, #{store_latitude}, #{store_longitude})
    </insert>
    
    <select id="storeInfo" parameterType="sdto" resultType="sdto">
        select store_seq, store_name, store_address, store_phone, hot_taste, sour_taste, clean_taste, sweet_taste, fresh_taste, k_hot_taste, store_latitude, store_longitude
        from store
        where store_seq = #{store_seq}
    </select>
    
    <select id="storeSearch" parameterType="String" resultType="sdto">
        select store_seq, store_name, store_address, store_phone, hot_taste, sour_taste, clean_taste, sweet_taste, fresh_taste, k_hot_taste, store_latitude, store_longitude
        from store
        where store_name = #{store_name}
        and store_address = #{store_address}
    </select>
    
    <insert id ="mergeBlog" parameterType="blogdto">
        insert into blog (URL,BLOG_NUMBER,OLD_ADDRESS,NEW_ADDRESS,RANK_SCORE,STORE_SEQ)	
        values (#{url}, #{blog_number}, #{old_address}, #{new_address}, #{rank_score}, #{store_seq})
    </insert>
    
    
    
</mapper>